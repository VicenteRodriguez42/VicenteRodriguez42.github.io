<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora educativa de dosis de insulina (Demo)</title>
  <style>
    body{font-family:Inter,system-ui,Segoe UI,Arial;max-width:880px;margin:28px auto;padding:20px;color:#0f172a}
    h1{font-size:1.6rem;margin-bottom:6px}
    .card{padding:18px;border-radius:10px;border:1px solid #e6edf3;box-shadow:0 6px 18px rgba(14,30,37,.04)}
    label{display:block;margin-top:12px;font-weight:600}
    input[type=number], input[type=text], select{width:100%;padding:10px;border-radius:6px;border:1px solid #d7e2ea;margin-top:6px}
    button{margin-top:14px;padding:10px 14px;border-radius:8px;border:0;background:#0ea5a8;color:white;font-weight:700;cursor:pointer}
    .result{margin-top:14px;padding:12px;background:#f8fafc;border-left:4px solid #60a5fa}
    .disclaimer{background:#fff4f4;color:#7f1d1d;padding:12px;border-radius:8px;margin-bottom:12px;border:1px solid #ffd6d6}
    small{color:#475569}
  </style>
</head>
<body>
  <h1>Calculadora educativa de dosis de insulina (Demo)</h1>
  <div class="card">
    <div class="disclaimer">
      <strong>AVISO — USO EDUCATIVO:</strong> Esta calculadora es un ejemplo informático y no debe usarse para tratamiento real. Consulta siempre a un profesional de la salud para cálculo y ajuste de insulina.
    </div>

    <label>Glicemia actual (mg/dL)</label>
    <input id="bg" type="number" placeholder="Ej. 180" value="150" />

    <label>Glicemia objetivo (mg/dL)</label>
    <input id="target" type="number" placeholder="Ej. 120" value="120" />

    <label>Sensibilidad a la insulina (mg/dL por unidad) — SI</label>
    <input id="si" type="number" placeholder="Ej. 50 (mg/dL por UI)" value="50" />

    <label>Carbohidratos de la comida (g)</label>
    <input id="carbs" type="number" placeholder="Ej. 60" value="0" />

    <label>Ratio carbohidratos/insulina (g por UI)</label>
    <input id="carbRatio" type="number" placeholder="Ej. 10 (g/UI)" value="10" />

    <label>Duración acción insulina (horas) — (para información)</label>
    <input id="tau" type="number" placeholder="Ej. 4" value="4" />

    <button id="calc">Calcular dosis (demo)</button>

    <div id="out" class="result" style="display:none"></div>

    <p style="margin-top:10px"><small>Fórmula demostrativa (simplificada):</small></p>
    <pre style="background:#f1f5f9;padding:8px;border-radius:6px">dosis = max(0, (G_actual - G_objetivo)/SI + carbs / carbRatio)</pre>
    <p><small>Esta fórmula **no** reemplaza una evaluación clínica. Está pensada para ilustrar cómo transformar datos en una fórmula matemática simple.</small></p>
  </div>

  <script>
    document.getElementById('calc').addEventListener('click', function(){
      const bg = Number(document.getElementById('bg').value || 0);
      const target = Number(document.getElementById('target').value || 0);
      const si = Number(document.getElementById('si').value || 1);
      const carbs = Number(document.getElementById('carbs').value || 0);
      const carbRatio = Number(document.getElementById('carbRatio').value || 1);
      const tau = Number(document.getElementById('tau').value || 4);

      // Fórmula simplificada (educativa):
      const correction = (bg - target) / si;     // unidades de insulina para corregir glucemia
      const meal = carbs / carbRatio;             // unidades para cubrir carbohidratos
      let dose = correction + meal;
      if (isNaN(dose)) dose = 0;
      dose = Math.max(0, Math.round(dose*10)/10); // redondeo 1 decimal

      const out = document.getElementById('out');
      out.style.display = 'block';
      out.innerHTML = `
        <strong>Dosis educativa sugerida:</strong> <span style="font-size:1.4rem">${dose} UI</span>
        <div style="margin-top:8px">
          <small>Desglose: corrección = ${correction.toFixed(2)} UI, cobertura comida = ${meal.toFixed(2)} UI, acción aprox. ${tau} h</small>
        </div>
      `;

      // NOTA importante dentro de la UI
      out.innerHTML += `<div style="margin-top:10px;padding:8px;border-radius:6px;background:#fffef6;border:1px solid #f0e68c"><small><strong>Nota:</strong> este cálculo es una **demostración**. No lo uses para tratamiento real.</small></div>`;
    });
  </script>
</body>
</html>
